streamline_templates:
  arrosage_voie:
    card:
      type: custom:vertical-stack-in-card
      cards:
        - type: custom:mushroom-template-card
          entity: switch.arrosage_electrovanne_[[numero_de_la_voie]]
          primary: '[[nom_de_la_voie]]'
          secondary: >-
            {% set volume = "" %} {% if
            has_value('input_text.arrosage_volume_voie_[[numero_de_la_voie]]')
            and
            has_value('input_text.arrosage_dernier_declenchement_voie_[[numero_de_la_voie]]')%}
              {% if not states('input_text.arrosage_volume_voie_[[numero_de_la_voie]]') in ['0']%}
                {% set volume = states('input_text.arrosage_volume_voie_[[numero_de_la_voie]]')+" L, " %}
              {% endif %}
              Dernier arrosage {{ volume }}le {{ as_timestamp(states('input_text.arrosage_dernier_declenchement_voie_[[numero_de_la_voie]]')) | timestamp_custom('%d/%m/%Y à %-H:%M') }}
            {% endif %}            
          icon: mdi:sprinkler-variant
          icon_color: |-
            {% if is_state(entity, 'on') %}
              cyan
            {% endif %} 
          tap_action:
            action: toggle
          card_mod:
            style:
              mushroom-state-info$: |
                .primary::after {
                  content: " - Voie [[numero_de_la_voie]]";
                  font-size: var(--card-secondary-font-size);
                  font-weight: 400;
                }
        - type: conditional
          conditions:
            - condition: state
              entity: timer.arrosage_voie_[[numero_de_la_voie]]
              state: idle
          card:
            type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: input_number.arrosage_duree_voie_[[numero_de_la_voie]]
                content: >-
                  {{ states(entity) |int(0) | timestamp_custom('%M min %S s',
                  false) }}
                tap_action:
                  action: more-info
                card_mod:
                  style: |
                    ha-card {
                      --chip-border-radius: 12px;
                    }
              - type: template
                entity: input_boolean.arrosage_enable_voie_[[numero_de_la_voie]]
                icon: |
                  {% if is_state(entity, 'on')%}
                    mdi:check-circle
                  {% else %}
                    mdi:close-circle-outline
                  {% endif %}  
                icon_color: |-
                  {% if is_state(entity, 'on')%}
                    light-green
                  {% else %}
                    disabled
                  {% endif %}
                tap_action:
                  action: toggle
                card_mod:
                  style: |
                    ha-card {
                      --chip-border-radius: 12px;
                    }
            alignment: end
            card_mod:
              style: |
                ha-card {
                  padding-top: 2px;
                  margin-top: -14px;
                  margin-left: 0px;
                  padding-bottom: 4px;
                  padding-left: 8px;
                  padding-right: 8px;
                }
        - type: conditional
          conditions:
            - condition: state
              entity: timer.arrosage_voie_[[numero_de_la_voie]]
              state: active
          card:
            type: custom:timer-bar-card
            entity: timer.arrosage_voie_[[numero_de_la_voie]]
            sync_issues: fix
            invert: true
            bar_direction: ltr
            bar_radius: 5px
            mushroom:
              primary_info: none
              icon_type: none
            card_mod:
              style: |
                ha-card {
                  transition: none !important;
                  padding: 0px !important;
                  --spacing: var(--mush-spacing, 10px) !important;
                  --icon-size: var(--mush-icon-size, 36px) !important;
                  background: none;
                  border: none;
                  margin-top: -4px;
                }
      card_mod:
        style: |
          ha-card {
            {% if is_state('switch.arrosage_electrovanne_[[numero_de_la_voie]]', 'on') %}
              background: linear-gradient(180deg, rgba(204,242,247,1) 70%, rgba(255,255,255,1) 100%) !important;
              border-color: #DCDCDC;
            {% else %}
              background: linear-gradient(180deg, rgba(171,171,171,1) 20%, rgba(255,255,255,1) 100%) !important;
              border-color: #DCDCDC;
            {% endif %}
          }
  arrosage_zone:
    card:
      type: vertical-stack
      cards:
        - type: custom:mod-card
          card:
            type: custom:mushroom-title-card
            title: ''
            subtitle: >-
              {{ state_attr('sensor.arrosage_noms_des_zones',
              'zone_[[numero_de_la_zone]]') }}
          card_mod:
            style:
              mushroom-title-card$: |
                .subtitle {
                  border-bottom: 1px solid var(--ha-card-border-color,var(--divider-color,#e0e0e0));
                  padding-bottom: 0px;
                }
                .subtitle::after {
                  content: "- Zone [[numero_de_la_zone]]";
                  font-size: var(--card-secondary-font-size);
                }
                .header {
                  margin-bottom: -7px;
                }
        - type: custom:mushroom-chips-card
          chips:
            - type: entity
              entity: input_boolean.arrosage_programmation_zone_[[numero_de_la_zone]]
              content_info: none
              icon_color: light-green
              card_mod:
                style: |
                  ha-card {
                    --chip-border-radius: 12px;
                  }
            - type: entity
              entity: input_boolean.arrosage_auto_zone_[[numero_de_la_zone]]
              tap_action:
                action: perform-action
                perform_action: input_boolean.turn_on
                target:
                  entity_id: input_boolean.arrosage_auto_zone_[[numero_de_la_zone]]
              content_info: none
              icon_color: light-green
              card_mod:
                style: |
                  ha-card {
                    --chip-border-radius: 12px;
                  }
          alignment: end
          card_mod:
            style: |
              ha-card {
                padding-right: 8px;
              }
views:
  - type: sections
    max_columns: 2
    path: arrosage
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: back
              - type: template
                content: ARROSAGE
                card_mod:
                  style: |
                    ha-card {
                      border: none;
                      background: transparent !important;
                    }
              - type: spacer
              - type: template
                icon_color: deep-orange
                icon: mdi:tune
                tap_action:
                  action: navigate
                  navigation_path: /dashboard-arrosage/parametres-dashboard-arrosage
            grid_options:
              columns: full
              rows: auto
        column_span: 2
      - type: grid
        cards:
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: Vous n'avez pas encore créé de calendrier pour l'arrosage.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 100px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:calendar-edit-outline
                        tap_action:
                          action: navigate
                          navigation_path: /calendar
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/INSTALLATION.md#--etape-10-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: calendar.arrosage
                state: unknown
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      L'arrosage de la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_1') }}
                      est en cours.

                      Arrêt prévu à
                      {{state_attr('input_datetime.arrosage_duree_cycle_zone_1',
                      'timestamp')| timestamp_custom("%Hh%M", true, now())}}
                    icon: mdi:sprinkler-variant
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:stop
                        tap_action:
                          action: perform-action
                          perform_action: script.arrosage_arret
                          data:
                            zone: zone 1
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_auto_zone_1
                state: 'on'
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_1
                above: 0
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      L'arrosage de la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_2') }}
                      est en cours.

                      Arrêt prévu à
                      {{state_attr('input_datetime.arrosage_duree_cycle_zone_2',
                      'timestamp')| timestamp_custom("%Hh%M", true, now())}}
                    icon: mdi:sprinkler-variant
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:stop
                        tap_action:
                          action: perform-action
                          perform_action: script.arrosage_arret
                          data:
                            zone: zone 2
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_auto_zone_2
                state: 'on'
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_2
                above: 0
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      L'arrosage de la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_3') }}
                      est en cours.

                      Arrêt prévu à
                      {{state_attr('input_datetime.arrosage_duree_cycle_zone_3',
                      'timestamp')| timestamp_custom("%Hh%M", true, now())}}
                    icon: mdi:sprinkler-variant
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:stop
                        tap_action:
                          action: perform-action
                          perform_action: script.arrosage_arret
                          data:
                            zone: zone 3
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_auto_zone_3
                state: 'on'
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_3
                above: 0
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      L'arrosage de la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_4') }}
                      est en cours.

                      Arrêt prévu à
                      {{state_attr('input_datetime.arrosage_duree_cycle_zone_4',
                      'timestamp')| timestamp_custom("%Hh%M", true, now())}}
                    icon: mdi:sprinkler-variant
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:stop
                        tap_action:
                          action: perform-action
                          perform_action: script.arrosage_arret
                          data:
                            zone: zone 4
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_auto_zone_4
                state: 'on'
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_4
                above: 0
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      L'arrosage de la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_5') }}
                      est en cours.

                      Arrêt prévu à
                      {{state_attr('input_datetime.arrosage_duree_cycle_zone_5',
                      'timestamp')| timestamp_custom("%Hh%M", true, now())}}
                    icon: mdi:sprinkler-variant
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:stop
                        tap_action:
                          action: perform-action
                          perform_action: script.arrosage_arret
                          data:
                            zone: zone 5
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_auto_zone_5
                state: 'on'
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_5
                above: 0
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      L'arrosage de la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_6') }}
                      est en cours.

                      Arrêt prévu à
                      {{state_attr('input_datetime.arrosage_duree_cycle_zone_6',
                      'timestamp')| timestamp_custom("%Hh%M", true, now())}}
                    icon: mdi:sprinkler-variant
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:stop
                        tap_action:
                          action: perform-action
                          perform_action: script.arrosage_arret
                          data:
                            zone: zone 6
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_auto_zone_6
                state: 'on'
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_6
                above: 0
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      L'arrosage de la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_7') }}
                      est en cours.

                      Arrêt prévu à
                      {{state_attr('input_datetime.arrosage_duree_cycle_zone_7',
                      'timestamp')| timestamp_custom("%Hh%M", true, now())}}
                    icon: mdi:sprinkler-variant
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:stop
                        tap_action:
                          action: perform-action
                          perform_action: script.arrosage_arret
                          data:
                            zone: zone 7
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_auto_zone_7
                state: 'on'
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_7
                above: 0
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      L'arrosage de la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_8') }}
                      est en cours.

                      Arrêt prévu à
                      {{state_attr('input_datetime.arrosage_duree_cycle_zone_8',
                      'timestamp')| timestamp_custom("%Hh%M", true, now())}}
                    icon: mdi:sprinkler-variant
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:stop
                        tap_action:
                          action: perform-action
                          perform_action: script.arrosage_arret
                          data:
                            zone: zone 8
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_auto_zone_8
                state: 'on'
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_8
                above: 0
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      L'arrosage de la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_9') }}
                      est en cours.

                      Arrêt prévu à
                      {{state_attr('input_datetime.arrosage_duree_cycle_zone_9',
                      'timestamp')| timestamp_custom("%Hh%M", true, now())}}
                    icon: mdi:sprinkler-variant
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:stop
                        tap_action:
                          action: perform-action
                          perform_action: script.arrosage_arret
                          data:
                            zone: zone 9
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_auto_zone_9
                state: 'on'
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_9
                above: 0
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Aucune électrovanne n'est incluse dans le cycle d'arrosage
                      de la zone {{ state_attr('sensor.arrosage_noms_des_zones',
                      'zone_1') }}.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 50px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DASHBOARD.md#--la-carte-%C3%A9lectrovanne-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_1
                below: 1
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: auto_zone_1
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Aucune électrovanne n'est incluse dans le cycle d'arrosage
                      de la zone {{ state_attr('sensor.arrosage_noms_des_zones',
                      'zone_2') }}.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 50px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DASHBOARD.md#--la-carte-%C3%A9lectrovanne-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_2
                below: 1
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: auto_zone_2
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Aucune électrovanne n'est incluse dans le cycle d'arrosage
                      de la zone {{ state_attr('sensor.arrosage_noms_des_zones',
                      'zone_3') }}.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 50px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DASHBOARD.md#--la-carte-%C3%A9lectrovanne-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_3
                below: 1
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: auto_zone_3
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Aucune électrovanne n'est incluse dans le cycle d'arrosage
                      de la zone {{ state_attr('sensor.arrosage_noms_des_zones',
                      'zone_4') }}.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 50px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DASHBOARD.md#--la-carte-%C3%A9lectrovanne-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_4
                below: 1
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: auto_zone_4
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Aucune électrovanne n'est incluse dans le cycle d'arrosage
                      de la zone {{ state_attr('sensor.arrosage_noms_des_zones',
                      'zone_5') }}.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 50px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DASHBOARD.md#--la-carte-%C3%A9lectrovanne-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_5
                below: 1
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: auto_zone_5
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Aucune électrovanne n'est incluse dans le cycle d'arrosage
                      de la zone {{ state_attr('sensor.arrosage_noms_des_zones',
                      'zone_6') }}.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 50px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DASHBOARD.md#--la-carte-%C3%A9lectrovanne-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_6
                below: 1
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: auto_zone_6
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Aucune électrovanne n'est incluse dans le cycle d'arrosage
                      de la zone {{ state_attr('sensor.arrosage_noms_des_zones',
                      'zone_7') }}.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 50px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DASHBOARD.md#--la-carte-%C3%A9lectrovanne-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_7
                below: 1
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: auto_zone_7
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Aucune électrovanne n'est incluse dans le cycle d'arrosage
                      de la zone {{ state_attr('sensor.arrosage_noms_des_zones',
                      'zone_8') }}.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 50px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DASHBOARD.md#--la-carte-%C3%A9lectrovanne-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_8
                below: 1
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: auto_zone_8
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Aucune électrovanne n'est incluse dans le cycle d'arrosage
                      de la zone {{ state_attr('sensor.arrosage_noms_des_zones',
                      'zone_9') }}.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                          padding-right: 50px;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        tap_action:
                          action: url
                          url_path: >-
                            https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DASHBOARD.md#--la-carte-%C3%A9lectrovanne-
                        icon: mdi:information
                        icon_color: orange
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_electrovannes_incluses_zone_9
                below: 1
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: auto_zone_9
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation activée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_1') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_1
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_1
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation désactivée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_1') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_1
                state: 'off'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_1
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation activée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_2') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_2
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_2
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation désactivée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_2') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_2
                state: 'off'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_2
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation activée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_3') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_3
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_3
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation désactivée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_3') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_3
                state: 'off'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_3
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation activée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_4') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_4
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_4
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation désactivée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_4') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_4
                state: 'off'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_4
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation activée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_5') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_5
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_5
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation désactivée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_5') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_5
                state: 'off'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_5
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation activée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_6') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_6
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_6
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation désactivée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_6') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_6
                state: 'off'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_6
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation activée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_7') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_7
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_7
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation désactivée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_7') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_7
                state: 'off'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_7
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation activée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_8') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_8
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_8
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation désactivée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_8') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_8
                state: 'off'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_8
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation activée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_9') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_9
                state: 'on'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_9
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: >-
                      Programmation désactivée pour la zone {{
                      state_attr('sensor.arrosage_noms_des_zones', 'zone_9') }}.
                    icon: mdi:calendar-clock-outline
                    icon_color: light-green
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #e8f3db;
                          padding-right: 50px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: input_boolean.arrosage_display_notifications
                state: 'on'
              - condition: state
                entity: input_boolean.arrosage_programmation_zone_9
                state: 'off'
              - condition: state
                entity: input_text.arrosage_display_notifications_choix
                state: programmation_zone_9
        column_span: 2
      - type: grid
        cards:
          - type: custom:streamline-card
            template: arrosage_zone
            variables:
              numero_de_la_zone: '1'
          - type: custom:streamline-card
            template: arrosage_voie
            variables:
              numero_de_la_voie: '1'
              nom_de_la_voie: Fraisiers
          - type: custom:streamline-card
            template: arrosage_voie
            variables:
              numero_de_la_voie: '2'
              nom_de_la_voie: Tomates
          - type: custom:streamline-card
            template: arrosage_voie
            variables:
              numero_de_la_voie: '3'
              nom_de_la_voie: Melons
          - type: custom:streamline-card
            template: arrosage_voie
            variables:
              numero_de_la_voie: '4'
              nom_de_la_voie: Salades
          - type: custom:streamline-card
            template: arrosage_voie
            variables:
              numero_de_la_voie: '8'
              nom_de_la_voie: Courgettes
          - type: custom:streamline-card
            template: arrosage_zone
            variables:
              numero_de_la_zone: '2'
          - type: custom:streamline-card
            template: arrosage_voie
            variables:
              numero_de_la_voie: '7'
              nom_de_la_voie: Abricotier/Poirier/Prunier
          - type: custom:streamline-card
            template: arrosage_voie
            variables:
              numero_de_la_voie: '9'
              nom_de_la_voie: Pêcher/Figuier
      - type: grid
        cards:
          - type: custom:streamline-card
            template: arrosage_zone
            variables:
              numero_de_la_zone: '3'
          - type: custom:streamline-card
            template: arrosage_voie
            variables:
              numero_de_la_voie: '5'
              nom_de_la_voie: Oranger
          - type: custom:streamline-card
            template: arrosage_voie
            variables:
              numero_de_la_voie: '6'
              nom_de_la_voie: Citronnier
          - type: custom:mod-card
            card:
              type: custom:mushroom-title-card
              title: ''
              subtitle: Infos complémentaires
            card_mod:
              style:
                mushroom-title-card$: |
                  .subtitle {
                    border-bottom: 1px solid var(--ha-card-border-color,var(--divider-color,#e0e0e0));
                    padding-bottom: 0px;
                  }
                  .header {
                    margin-bottom: -7px;
                  }
          - type: vertical-stack
            cards:
              - type: custom:mushroom-template-card
                multiline_secondary: true
                primary: Prochains arrosages
                secondary: Vous n'avez pas installé l'intégration Calendar Merge
                icon: mdi:calendar-clock
                icon_color: deep-orange
                tap_action:
                  action: navigate
                  navigation_path: /hacs
                grid_options:
                  columns: full
                visibility:
                  - condition: state
                    entity: update.calendar_merge_update
                    state: unknown
                card_mod:
                  style: |
                    ha-card {
                      background-color: #FAEFDB;
                    }
              - type: custom:mushroom-template-card
                multiline_secondary: true
                primary: Prochains arrosages
                secondary: Vous n'avez pas configuré l'entrée Calendar Merge
                icon: mdi:calendar-clock
                icon_color: deep-orange
                tap_action:
                  action: navigate
                  navigation_path: /config/helpers
                grid_options:
                  columns: full
                visibility:
                  - condition: state
                    entity: calendar.arrosage_a_venir
                    state: unknown
                card_mod:
                  style: |
                    ha-card {
                      background-color: #FAEFDB;
                    }
              - type: custom:mushroom-template-card
                multiline_secondary: true
                primary: Prochains arrosages
                secondary: >-
                  {% if states('sensor.arrosage_a_venir')|int(0) > 0 %}  


                  {% for i in range(0, states('sensor.arrosage_a_venir')|int(0))
                  %}
                   {{states('sensor.arrosage_a_venir_event_' ~ i)}}
                  {% endfor %}


                  {% else %}
                    Aucune programmation d'arrosage prévue
                  {% endif %}
                icon: mdi:calendar-clock
                icon_color: light-green
                tap_action:
                  action: navigate
                  navigation_path: /dashboard-arrosage/planning-arrosage
                grid_options:
                  columns: full
                visibility:
                  - condition: state
                    entity: calendar.arrosage_a_venir
                    state_not: unknown
          - type: custom:mushroom-template-card
            primary: Programmation arrosage
            secondary: Voir/Modifier les horaires d'arrosage
            icon: mdi:calendar-clock
            icon_color: light-green
            tap_action:
              action: navigate
              navigation_path: /dashboard-arrosage/planning-arrosage
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: calendar.arrosage
                state_not: unknown
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
            grid_options:
              columns: full
              rows: auto
            card_mod:
              style: |
                ha-card {
                  padding-bottom: 10px;
                }
          - type: custom:mushroom-template-card
            entity: binary_sensor.arrosage_electrovannes_connected
            primary: Electrovannes
            secondary: |-
              {% if is_state(entity, "on") %}
                Connecté
              {% else %}
                Déconnecté
              {% endif %}
            icon_color: |-
              {% if is_state(entity, "on") %}
                light-blue
              {% else %}
                red
              {% endif %}
            icon: |-
              {% if is_state(entity, "on") %}
                mdi:check-network-outline   
              {% else %}
                mdi:network-off-outline
              {% endif %}
            grid_options:
              columns: full
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
            grid_options:
              columns: full
              rows: auto
            card_mod:
              style: |
                ha-card {
                  padding-bottom: 10px;
                }
          - type: custom:mushroom-entity-card
            entity: sensor.arrosage_compteur_eau
            name: Compteur d'eau
            grid_options:
              columns: full
    title: Arrosage
    icon: mdi:sprinkler-variant
    cards: []
  - type: sections
    max_columns: 2
    title: Planning arrosage
    path: planning-arrosage
    icon: mdi:calendar
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: back
              - type: template
                content: PROGRAMMATION ARROSAGE
                double_tap_action:
                  action: none
                tap_action:
                  action: none
                hold_action:
                  action: none
                card_mod:
                  style: |
                    ha-card {
                      border: none;
                      background: transparent !important;
                    }
            grid_options:
              columns: full
              rows: auto
        column_span: 2
      - type: grid
        cards:
          - type: custom:mod-card
            card:
              type: custom:mushroom-title-card
              title: ''
              subtitle: Calendrier d'arrosage
            card_mod:
              style:
                mushroom-title-card$: |
                  .subtitle {
                    border-bottom: 1px solid var(--ha-card-border-color,var(--divider-color,#e0e0e0));
                    padding-bottom: 0px;
                  }
                  .header {
                    margin-bottom: -7px;
                  }
          - type: horizontal-stack
            cards:
              - type: custom:vertical-stack-in-card
                cards:
                  - type: custom:mushroom-template-card
                    multiline_secondary: true
                    primary: ''
                    secondary: Vous n'avez pas encore crée de calendrier pour l'arrosage.
                    icon: mdi:alert
                    icon_color: deep-orange
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          background-color: #FAEFDB;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: template
                        icon: mdi:calendar-edit-outline
                        tap_action:
                          action: navigate
                          navigation_path: /calendar
                        card_mod:
                          style: |
                            ha-card {
                              border:none; 
                              --chip-border-radius: 12px;
                              --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                            }
                    alignment: end
                    card_mod:
                      style: |
                        ha-card {
                          margin-top: -46px;
                          margin-left: 50%;
                          padding-bottom: 8px;
                          padding-left: 8px;
                          padding-right: 8px;
                        }
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: calendar.arrosage
                state: unknown
          - type: vertical-stack
            cards:
              - type: calendar
                entities:
                  - calendar.arrosage
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    tap_action:
                      action: navigate
                      navigation_path: /calendar
                    icon: mdi:plus
                    icon_color: white
                    content: ''
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      --chip-background: #0CACF4;
                      --chip-border-color: #0CACF4;
                      --primary-text-color: white;
                      padding-right: 8px;
                    }
            visibility:
              - condition: state
                entity: calendar.arrosage
                state_not: unknown
      - type: grid
        cards:
          - type: custom:mod-card
            card:
              type: custom:mushroom-title-card
              title: ''
              subtitle: Infos complémentaires
            card_mod:
              style:
                mushroom-title-card$: |
                  .subtitle {
                    border-bottom: 1px solid var(--ha-card-border-color,var(--divider-color,#e0e0e0));
                    padding-bottom: 0px;
                  }
                  .header {
                    margin-bottom: -7px;
                  }
          - type: markdown
            content: >-
              - Pour ajouter une programmation cliquez sur l'icone <font color
              ="#0cacf4"><ha-icon icon="mdi:plus-circle"></ha-icon></font> sous
              le calendrier.<br><br>

              - Pour modifier/supprimer une programmation vous pouvez cliquez
              directement dessus dans le calendrier ci-contre/ci-dessus.<br><br>

              - **<font color =orange>Attention</font>**, tout ajout ou
              modification à un délai de 15 minutes avant d'être pris en
              compte.<br><br>

              - **<font color =orange>Attention</font>**, pour une prise en
              compte de la programmation, bien penser à mettre **<font color
              =orange>le nom </font>** de la zone d'arrosage concernée comme
              résumé du calendrier.<br><br>

              - Pour rappel, les noms de vos zones sont :

              {%- for item in states.sensor.arrosage_noms_des_zones.attributes |
              select('match', 'zone_') %}

              {% if not is_state_attr('sensor.arrosage_noms_des_zones' , item,
              'Nom_de_la_'~item ) %} Pour la {{ item | replace('_',' ') }} :
              **<font color =orange>{{
              state_attr('sensor.arrosage_noms_des_zones' , item) }}</font>** {%
              endif %} {% endfor %}
            card_mod:
              style: |
                ha-card {
                  color: var(--secondary-text-color);
                  background: none;
                  border: 0;
                }
                  ha-markdown.no-header {
                  padding-bottom: 0px !important;
                }      
    cards: []
  - type: sections
    max_columns: 2
    title: Paramètres Dashboard arrosage
    path: parametres-dashboard-arrosage
    sections:
      - type: grid
        cards:
          - type: custom:mushroom-chips-card
            chips:
              - type: back
              - type: template
                content: PARAMETRES
                double_tap_action:
                  action: none
                tap_action:
                  action: none
                hold_action:
                  action: none
                card_mod:
                  style: |
                    ha-card {
                      border: none;
                      background: transparent !important;
                    }
            grid_options:
              columns: full
              rows: auto
        column_span: 2
      - type: grid
        cards:
          - type: custom:mod-card
            card:
              type: custom:mushroom-title-card
              title: ''
              subtitle: Paramètres
            card_mod:
              style:
                mushroom-title-card$: |
                  .subtitle {
                    border-bottom: 1px solid var(--ha-card-border-color,var(--divider-color,#e0e0e0));
                    padding-bottom: 0px;
                  }
                  .header {
                    margin-bottom: -7px;
                  }
            grid_options:
              columns: full
              rows: auto
          - type: markdown
            content: >-
              **<font color=orange size=2>Notifications</font>**


              Activer/Désactiver les deux commandes ci-dessous autorise ou pas,
              l'envoi de notifications vers l'application mobile ou Télégram.
            grid_options:
              columns: full
            text_only: true
          - type: custom:mushroom-entity-card
            entity: input_boolean.arrosage_enable_mobileapp_notifications
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            name: Notifications de l'application mobile
            grid_options:
              columns: 12
          - type: custom:mushroom-entity-card
            entity: input_boolean.arrosage_enable_telegram_notifications
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            grid_options:
              columns: 12
            name: Notifications Télégram
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
            grid_options:
              columns: full
              rows: auto
            card_mod:
              style: |
                ha-card {
                  padding-bottom: 10px;
                }
        column_span: 2
      - type: grid
        cards:
          - type: custom:mod-card
            card:
              type: custom:mushroom-title-card
              title: ''
              subtitle: Informations
            card_mod:
              style:
                mushroom-title-card$: |
                  .subtitle {
                    border-bottom: 1px solid var(--ha-card-border-color,var(--divider-color,#e0e0e0));
                    padding-bottom: 0px;
                  }
                  .header {
                    margin-bottom: -7px;
                  }
            grid_options:
              columns: full
              rows: auto
          - type: markdown
            content: >
              {%- set switch = (states['switch'] |
              selectattr('entity_id','match','switch.arrosage_electrovanne_') |
              selectattr('state', 'in', ['unavailable']) |
              map(attribute='entity_id') | list) %}

              {%- set boolean = (states['input_boolean'] |
              selectattr('entity_id','match','input_boolean.arrosage_') |
              selectattr('state', 'in', ['unavailable']) |
              map(attribute='entity_id') | list ) %}

              {%- set text = (states['input_text'] |
              selectattr('entity_id','match','input_text.arrosage_') |
              selectattr('state', 'in', ['unavailable']) |
              map(attribute='entity_id') | list ) %}

              {%- set number = (states['input_number'] |
              selectattr('entity_id','match','input_number.arrosage_') |
              selectattr('state', 'in', ['unavailable']) |
              map(attribute='entity_id') | list ) %}

              {%- set datetime = (states['input_datetime'] |
              selectattr('entity_id','match','input_datetime.arrosage_') |
              selectattr('state', 'in', ['unavailable']) |
              map(attribute='entity_id') | list ) %}

              {%- set timer = (states['timer'] |
              selectattr('entity_id','match','timer.arrosage_') |
              selectattr('state', 'in', ['unavailable']) |
              map(attribute='entity_id') | list ) %}

              {%- set automation = (states['automation'] |
              selectattr('entity_id','match','automation.arrosage_') |
              selectattr('state', 'in', ['unavailable']) |
              map(attribute='entity_id') | list ) %}

              {%- set script = (states['script'] |
              selectattr('entity_id','match','script.arrosage_') |
              selectattr('state', 'in', ['unavailable']) |
              map(attribute='entity_id') | list ) %}

              {%- set entites = boolean + text + number + datetime + timer +
              switch + automation + script %}

              {%- set nb_entites_orphelines = boolean|count + text|count +
              number|count + datetime|count + timer|count + switch|count +
              automation|count + script|count %}

              {% if (nb_entites_orphelines) != 0 %}

              {%- set entites_orphelines = entites|join(', ') %}

              {%- else %}

              {%- set entites_orphelines = "" %}

              {%- endif %}


              **<font color=orange size=2>Entités orphelines détectées</font>**


              Des fichiers nécessaires aux voies ou aux zones d'arrosage ont été
              effacés mais les entités existent toujours.


              > ***<font size=2>Listes des entités orphelines :*** {{
              entites_orphelines }}</font>


              > *Vous pouvez les supprimer en vous rendant Paramètres/Appareils
              et services/entités.* [<ha-icon
              icon="mdi:information-outline"></ha-icon>](https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DOCUMENTATION.md#--les-entit%C3%A9s-orphelines)
            grid_options:
              columns: full
            text_only: true
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
            grid_options:
              columns: full
              rows: auto
            card_mod:
              style: |
                ha-card {
                  padding-bottom: 10px;
                }
        column_span: 2
        visibility:
          - condition: numeric_state
            entity: input_number.arrosage_nb_entites_orphelines
            above: 1
      - type: grid
        cards:
          - type: custom:mod-card
            card:
              type: custom:mushroom-title-card
              title: ''
              subtitle: Outils
            card_mod:
              style:
                mushroom-title-card$: |
                  .subtitle {
                    border-bottom: 1px solid var(--ha-card-border-color,var(--divider-color,#e0e0e0));
                    padding-bottom: 0px;
                  }
                  .header {
                    margin-bottom: -7px;
                  }
            grid_options:
              columns: full
              rows: auto
          - type: markdown
            content: >+
              {% set message = "voies d'arrosage sont présentes" %}

              {% if states('input_number.arrosage_nb_file_voies') | int(0) == 1
              %}
                {% set message = "voie d'arrosage est présente" %}
              {% endif %}

              **<font color=orange size=2>Ajouter une voie d'arrosage</font>**


              {{states('input_number.arrosage_nb_file_voies') | int(0) }}
              {{message}}. Pour en ajouter une supplémentaire cliquer sur le
              bouton *'Générer les entités pour une nouvelle voie d'arrosage'*.

            grid_options:
              columns: full
            text_only: true
          - type: custom:mushroom-entity-card
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            name: Générer les entités pour une nouvelle voie d'arrosage
            grid_options:
              columns: 18
              rows: 1
            entity: script.arrosage_generer_fichiers_voie
            icon: mdi:file-multiple
            secondary_info: none
          - type: custom:mushroom-entity-card
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            name: Redémarrer Home Assistant
            grid_options:
              columns: 6
              rows: 1
            entity: script.arrosage_redemarrer_ha
            icon: mdi:restart
            secondary_info: none
          - type: markdown
            content: >
              Vous pouvez ajouter autant de voies que vous le souhaitez. Ensuite
              il faudra redémarrer Home Assistant pour qu'elles soient prise en
              compte.


              >*Après redémarrage, penser à inclure la nouvelle voie à une zone
              d'arrosage.* [<ha-icon
              icon="mdi:information-outline"></ha-icon>](https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DOCUMENTATION.md#--inclure-une-voie-%C3%A0-une-zone-darrosage)
            grid_options:
              columns: full
            text_only: true
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
            grid_options:
              columns: full
              rows: auto
            card_mod:
              style: |
                ha-card {
                  padding-bottom: 10px;
                }
          - type: markdown
            content: >-
              {% set message_zone = "zones d'arrosage sont présentes" %}

              {% if states('input_number.arrosage_nb_file_zones') | int(0) == 1
              %}
                {% set message_zone = "zone d'arrosage est présente" %}
              {% endif %}

              {%- set ns = namespace(nb_zones_actives = 0) %}

              {%- for item in states.sensor.arrosage_noms_des_zones.attributes |
              select('match', 'zone_') %}
                {%- if not is_state_attr('sensor.arrosage_noms_des_zones' , item, 'Nom_de_la_'~item ) %}
                  {%- set ns.nb_zones_actives = ns.nb_zones_actives + 1 %}
                {%- endif %}
              {%- endfor %}

              {%- set message_diff = " (et "+(ns.nb_zones_actives|string)+"
              activées)" %}

              {%- if states('input_number.arrosage_nb_file_zones')|int(0)  == 1
              %}
                {%- set message_diff = " (et "+(ns.nb_zones_actives|string)+" activée)" %}
              {%- endif %}

              {%- if states('input_number.arrosage_nb_file_zones')|int(0)  !=
              ns.nb_zones_actives %}
                {%- if ns.nb_zones_actives < states('input_number.arrosage_nb_file_zones')|int(0) %}
                  {%- set message_diff = " (dont "+(ns.nb_zones_actives|string)+" actives, pensez à activer les nouvelles zones)" %}
                {%- elif ns.nb_zones_actives > states('input_number.arrosage_nb_file_zones')|int(0) %}
                  {%- set message_diff = " ("+(ns.nb_zones_actives|string)+" sont activées, pensez à désactiver les zones en trop)" %}
                {%- endif %}
              {%- endif %}


              **<font color=orange size=2>Ajouter une zone d'arrosage</font>**


              {{states('input_number.arrosage_nb_file_zones') | int(0) }}
              {{message_zone}}{{message_diff}}. Pour en ajouter une
              supplémentaire cliquer sur le bouton *'Générer les entités pour
              une nouvelle zone d'arrosage'*.
            grid_options:
              columns: full
            text_only: true
          - type: custom:mushroom-entity-card
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            name: Générer les entités pour une nouvelle zone d'arrosage
            grid_options:
              columns: 18
              rows: 1
            icon: mdi:file-multiple
            secondary_info: none
            entity: script.arrosage_generer_fichiers_zone
          - type: custom:mushroom-entity-card
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            name: Redémarrer Home Assistant
            grid_options:
              columns: 6
              rows: 1
            entity: script.arrosage_redemarrer_ha
            icon: mdi:restart
            secondary_info: none
          - type: markdown
            content: >-
              Vous pouvez ajouter autant de zones que vous le souhaitez. Ensuite
              il faudra redémarrer Home Assistant pour qu'elles soient prise en
              compte.


              >*Avant redémarrage, penser à activer la nouvelle zone.* [<ha-icon
              icon="mdi:information-outline"></ha-icon>](https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DOCUMENTATION.md#--activerd%C3%A9sactiver-une-zone)


              >*Si vous voulez plus de 9 zones, voir la documentation.*
              [<ha-icon
              icon="mdi:information-outline"></ha-icon>](https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DOCUMENTATION.md#--si-vous-avez-besoin-de-plus-de-9-zones)
            grid_options:
              columns: full
            text_only: true
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
            grid_options:
              columns: full
              rows: auto
            card_mod:
              style: |
                ha-card {
                  padding-bottom: 10px;
                }
          - type: markdown
            content: >+
              **<font color=orange size=2>Supprimer une voie d'arrosage</font>**


              {{states('input_number.arrosage_nb_file_voies') | int(0) }} voies
              d'arrosage sont présentes. Pour supprimer la voie numéro
              {{states('input_number.arrosage_nb_file_voies') | int(0) }}
              cliquer sur le bouton *'Supprimer les entités pour la dernière
              voie d'arrosage'*.

            grid_options:
              columns: full
            text_only: true
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_nb_file_voies
                above: 1
          - type: markdown
            content: >+
              **<font color=orange size=2>Supprimer une voie d'arrosage</font>**


              Une seule voie d'arrosage est présente. Vous ne pouvez pas la
              supprimer.

            grid_options:
              columns: full
            text_only: true
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_nb_file_voies
                below: 2
          - type: custom:mushroom-entity-card
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            name: Supprimer les entités pour la dernière voie d'arrosage
            grid_options:
              columns: 18
              rows: 1
            entity: script.arrosage_supprimer_fichiers_voie
            icon: mdi:file-multiple
            secondary_info: none
          - type: custom:mushroom-entity-card
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            name: Redémarrer Home Assistant
            grid_options:
              columns: 6
              rows: 1
            entity: script.arrosage_redemarrer_ha
            icon: mdi:restart
            secondary_info: none
          - type: markdown
            content: >-
              Vous pouvez supprimer toutes les voies l'exception de la première.
              Ensuite il faudra redémarrer Home Assistant pour que la
              suppression soit prise en compte.
            grid_options:
              columns: full
            text_only: true
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
            grid_options:
              columns: full
              rows: auto
            card_mod:
              style: |
                ha-card {
                  padding-bottom: 10px;
                }
          - type: markdown
            content: >+
              **<font color=orange size=2>Supprimer une zone d'arrosage</font>**


              {{states('input_number.arrosage_nb_file_zones') | int(0) }} zones
              d'arrosage sont présentes. Pour supprimer la zone numéro
              {{states('input_number.arrosage_nb_file_zones') | int(0) }}
              cliquer sur le bouton *'Supprimer les entités pour la dernière
              zone d'arrosage'*.

            grid_options:
              columns: full
            text_only: true
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_nb_file_zones
                above: 1
          - type: markdown
            content: >+
              **<font color=orange size=2>Supprimer une zone d'arrosage</font>**


              Une seule zone d'arrosage est présente. Vous ne pouvez pas la
              supprimer.

            grid_options:
              columns: full
            text_only: true
            visibility:
              - condition: numeric_state
                entity: input_number.arrosage_nb_file_zones
                below: 2
          - type: custom:mushroom-entity-card
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            name: Supprimer les entités pour la dernière voie d'arrosage
            grid_options:
              columns: 18
              rows: 1
            entity: script.arrosage_supprimer_fichiers_zone
            icon: mdi:file-multiple
            secondary_info: none
          - type: custom:mushroom-entity-card
            icon_color: light-green
            tap_action:
              action: toggle
            hold_action:
              action: none
            name: Redémarrer Home Assistant
            grid_options:
              columns: 6
              rows: 1
            entity: script.arrosage_redemarrer_ha
            icon: mdi:restart
            secondary_info: none
          - type: markdown
            content: >-
              Vous pouvez supprimer toutes les zones à l'exception de la
              première. Ensuite il faudra redémarrer Home Assistant pour que la
              suppression soit prise en compte.


              >*Avant redémarrage, penser à désactiver la zone supprimée.* 
              [<ha-icon
              icon="mdi:information-outline"></ha-icon>](https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/DOCUMENTATION.md#--activerd%C3%A9sactiver-une-zone)
            grid_options:
              columns: full
            text_only: true
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
            grid_options:
              columns: full
              rows: auto
            card_mod:
              style: |
                ha-card {
                  padding-bottom: 10px;
                }
        column_span: 2
      - type: grid
        cards:
          - type: custom:mod-card
            card:
              type: custom:mushroom-title-card
              title: ''
              subtitle: Mode de fonctionnement
            card_mod:
              style:
                mushroom-title-card$: |
                  .subtitle {
                    border-bottom: 1px solid var(--ha-card-border-color,var(--divider-color,#e0e0e0));
                    padding-bottom: 0px;
                  }
                  .header {
                    margin-bottom: -7px;
                  }
            grid_options:
              columns: full
              rows: auto
          - type: markdown
            content: |-
              **<font color=orange size=2>Simulation</font>**

                Aucune correspondance matérielle à afficher dans le mode simulation. Les actions sur le dashboard n'ont aucune incidence sur votre équipement.
            grid_options:
              columns: full
            text_only: true
            visibility:
              - condition: state
                entity: sensor.arrosage_correspondance_materiel
                state: '0'
          - type: markdown
            content: >-

              {% set data =
              state_attr('sensor.arrosage_correspondance_materiel', 'json_data')
              %}

              **<font color=orange size=2>Production</font>**


              Correspondance des voies avec votre matériel :

              {% for item in data %}
                - Voie {{ item.voie }} : {{ item.entity_id }}
              {% endfor %}
            grid_options:
              columns: full
            text_only: true
            visibility:
              - condition: state
                entity: sensor.arrosage_correspondance_materiel
                state_not: '0'
          - type: custom:mushroom-chips-card
            chips:
              - type: spacer
            grid_options:
              columns: full
              rows: auto
            card_mod:
              style: |
                ha-card {
                  padding-bottom: 10px;
                }
        column_span: 2
    cards: []
    icon: mdi:tune
