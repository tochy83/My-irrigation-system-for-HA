type: sections
max_columns: 2
path: arrosage
sections:
  - type: grid
    cards:
      - type: custom:mushroom-chips-card
        chips:
          - type: back
          - type: template
            content: ARROSAGE
            card_mod:
              style: |
                ha-card {
                  border: none;
                  background: transparent !important;
                }
          - type: spacer
          - type: template
            icon_color: deep-orange
            icon: mdi:tune
            tap_action:
              action: navigate
              navigation_path: parametres-dashboard-arrosage
        grid_options:
          columns: full
          rows: auto
    column_span: 2
  - type: grid
    cards:
      - type: horizontal-stack
        cards:
          - type: custom:vertical-stack-in-card
            cards:
              - type: custom:mushroom-template-card
                multiline_secondary: true
                primary: ""
                secondary: Vous n'avez pas encore créé de calendrier pour l'arrosage.
                icon: mdi:alert
                tap_action:
                  action: none
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                color: deep-orange
                features_position: bottom
                card_mod:
                  style: |
                    ha-card {
                      background-color: #FAEFDB;
                      padding-right: 100px;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    icon: mdi:calendar-edit-outline
                    tap_action:
                      action: navigate
                      navigation_path: /calendar
                    card_mod:
                      style: |
                        ha-card {
                          border:none; 
                          --chip-border-radius: 12px;
                          --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                        }
                  - type: template
                    tap_action:
                      action: url
                      url_path: >-
                        https://github.com/tochy83/My-irrigation-system-for-HA/blob/main/INSTALLATION.md#--etape-10-
                    icon: mdi:information
                    icon_color: orange
                    card_mod:
                      style: |
                        ha-card {
                          border:none; 
                          --chip-border-radius: 12px;
                          --chip-background: rgba(var(--rgb-primary-text-color), 0.1);
                        }
                alignment: end
                card_mod:
                  style: |
                    ha-card {
                      margin-top: -46px;
                      margin-left: 50%;
                      padding-bottom: 8px;
                      padding-left: 8px;
                      padding-right: 8px;
                    }
        grid_options:
          columns: full
        visibility:
          - condition: state
            entity: calendar.arrosage
            state: unknown
      - type: custom:streamline-card
        template: arrosage_notification_arrosage_en_cours
        variables:
          numero_de_la_zone: "1"
        grid_options:
          columns: full
      - type: custom:streamline-card
        template: arrosage_notification_arrosage_en_cours
        variables:
          numero_de_la_zone: "2"
        grid_options:
          columns: full
      - type: custom:streamline-card
        template: arrosage_notification_arrosage_en_cours
        variables:
          numero_de_la_zone: "3"
        grid_options:
          columns: full
    column_span: 2
  - type: grid
    cards:
      - type: custom:streamline-card
        template: arrosage_zone
        variables:
          numero_de_la_zone: "1"
      - type: custom:streamline-card
        template: arrosage_voie
        variables:
          numero_de_la_voie: "1"
          nom_de_la_voie: Fraisiers
      - type: custom:streamline-card
        template: arrosage_voie
        variables:
          numero_de_la_voie: "2"
          nom_de_la_voie: Tomates
      - type: custom:streamline-card
        template: arrosage_voie
        variables:
          numero_de_la_voie: "3"
          nom_de_la_voie: Melons
      - type: custom:streamline-card
        template: arrosage_voie
        variables:
          numero_de_la_voie: "4"
          nom_de_la_voie: Salades
      - type: custom:streamline-card
        template: arrosage_voie
        variables:
          numero_de_la_voie: "8"
          nom_de_la_voie: Courgettes
      - type: custom:streamline-card
        template: arrosage_zone
        variables:
          numero_de_la_zone: "2"
      - type: custom:streamline-card
        template: arrosage_voie
        variables:
          numero_de_la_voie: "7"
          nom_de_la_voie: Abricotier/Poirier/Prunier
      - type: custom:streamline-card
        template: arrosage_voie
        variables:
          numero_de_la_voie: "9"
          nom_de_la_voie: Pêcher/Figuier
  - type: grid
    cards:
      - type: custom:streamline-card
        template: arrosage_zone
        variables:
          numero_de_la_zone: "3"
      - type: custom:streamline-card
        template: arrosage_voie
        variables:
          numero_de_la_voie: "5"
          nom_de_la_voie: Oranger
      - type: custom:streamline-card
        template: arrosage_voie
        variables:
          numero_de_la_voie: "6"
          nom_de_la_voie: Citronnier
      - type: custom:mushroom-title-card
        title: ""
        subtitle: Infos complémentaires
        card_mod:
          style: |
            .subtitle {
              border-bottom: 1px solid var(--ha-card-border-color,var(--divider-color,#e0e0e0));
              padding-bottom: 0px;
            }
            .header {
              margin-bottom: -7px;
            }
      - type: vertical-stack
        cards:
          - type: custom:mushroom-template-card
            multiline_secondary: true
            primary: Prochains arrosages
            secondary: Vous n'avez pas installé l'intégration Calendar Merge
            icon: mdi:calendar-clock
            tap_action:
              action: navigate
              navigation_path: /hacs
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: update.calendar_merge_update
                state: unknown
            color: deep-orange
            features_position: bottom
            card_mod:
              style: |
                ha-card {
                  background-color: #FAEFDB;
                }
          - type: custom:mushroom-template-card
            multiline_secondary: true
            primary: Prochains arrosages
            secondary: Vous n'avez pas configuré l'entrée Calendar Merge
            icon: mdi:calendar-clock
            tap_action:
              action: navigate
              navigation_path: /config/helpers
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: calendar.arrosage_a_venir
                state: unknown
            color: deep-orange
            features_position: bottom
            card_mod:
              style: |
                ha-card {
                  background-color: #FAEFDB;
                }
          - type: custom:mushroom-template-card
            multiline_secondary: true
            primary: Prochains arrosages
            secondary: |-
              {% if states('sensor.arrosage_a_venir')|int(0) > 0 %}  

              {% for i in range(0, states('sensor.arrosage_a_venir')|int(0)) %}
               {{states('sensor.arrosage_a_venir_event_' ~ i)}}
              {% endfor %}

              {% else %}
                Aucune programmation d'arrosage prévue
              {% endif %}
            icon: mdi:calendar-clock
            tap_action:
              action: navigate
              navigation_path: planning-arrosage
            grid_options:
              columns: full
            visibility:
              - condition: state
                entity: calendar.arrosage_a_venir
                state_not: unknown
            color: light-green
            features_position: bottom
      - type: custom:mushroom-template-card
        primary: Programmation arrosage
        secondary: Voir/Modifier les horaires d'arrosage
        icon: mdi:calendar-clock
        icon_color: light-green
        tap_action:
          action: navigate
          navigation_path: /dashboard-arrosage/planning-arrosage
        grid_options:
          columns: full
        visibility:
          - condition: state
            entity: calendar.arrosage
            state_not: unknown
      - type: custom:mushroom-chips-card
        chips:
          - type: spacer
        grid_options:
          columns: full
          rows: auto
        card_mod:
          style: |
            ha-card {
              padding-bottom: 10px;
            }
      - type: custom:mushroom-template-card
        entity: binary_sensor.arrosage_electrovannes_connected
        primary: Electrovannes
        secondary: |-
          {% if is_state(entity, "on") %}
            Connecté
          {% else %}
            Déconnecté
          {% endif %}
        icon_color: |-
          {% if is_state(entity, "on") %}
            light-blue
          {% else %}
            red
          {% endif %}
        icon: |-
          {% if is_state(entity, "on") %}
            mdi:check-network-outline   
          {% else %}
            mdi:network-off-outline
          {% endif %}
        grid_options:
          columns: full
      - type: custom:mushroom-chips-card
        chips:
          - type: spacer
        grid_options:
          columns: full
          rows: auto
        card_mod:
          style: |
            ha-card {
              padding-bottom: 10px;
            }
      - type: tile
        features_position: bottom
        vertical: false
        entity: sensor.arrosage_compteur_eau
        name: Compteur d'eau
        color: blue
        grid_options:
          columns: full
title: Arrosage
icon: mdi:sprinkler-variant
cards: []
