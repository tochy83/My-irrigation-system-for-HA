script:
  arrosage_declenchement_auto_voie_[X]:
    alias: Arrosage - Déclenchement auto voie [X]
    description: >-
      Script de déclenchement de la voie [X] pour les arrosages de zone. Si vous avez
      moins de [X] voies d'arrosage vous pouvez supprimer ce script.
      

      Très important, il faut ajouter à ce script un label (libellé) correspondant à
      la zone dans laquelle cette électrovanne sera, sinon elle ne sera pas prise en
      compte dans les cycles d'arrosage.

      Ex: si c'est la zone d'arrosage 1 le label sera Zone 1
    sequence:
      - condition: state
        entity_id: input_boolean.arrosage_enable_voie_[X]
        state: "on"
        alias: >-
          Vérifier si cette électrovanne est incluse dans le cycle d'arrosage en
          cours.
      - action: switch.turn_on
        metadata: {}
        data: {}
        target:
          entity_id: switch.arrosage_electrovanne_[X]
      - wait_for_trigger:
          - event_type: timer.finished
            event_data:
              entity_id: timer.arrosage_voie_[X]
            trigger: event
        timeout:
          hours: 0
          minutes: 0
          seconds: "{{ states('input_number.arrosage_duree_voie_[X]') }}"
          milliseconds: 0
        alias: Attendre la fin du timer de cette électrovanne.
      - delay:
          hours: 0
          minutes: 0
          seconds: 1
          milliseconds: 0


